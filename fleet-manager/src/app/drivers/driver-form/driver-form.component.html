<div class="driver-form">
  <div class="form-header">
    <h2>{{ driverId ? 'Edit Driver' : 'Add New Driver' }}</h2>
    <button (click)="onCancel()" class="back-btn">
      <span class="btn-icon">‚¨ÖÔ∏è</span>
      Back to List
    </button>
  </div>

  <form [formGroup]="driverForm" (ngSubmit)="onSubmit()" class="driver-form-content">
    <div class="form-row">
      <div class="form-group">
        <label for="name">Driver Name *</label>
        <input id="name" formControlName="name" class="form-control" placeholder="Enter driver name" />
        @if (driverForm.get('name')?.invalid && driverForm.get('name')?.touched) {
          <div class="error-message">Driver name is required</div>
        }
      </div>

      <div class="form-group">
        <label for="licenseNumber">License Number</label>
        <input id="licenseNumber" formControlName="licenseNumber" class="form-control" placeholder="Enter license number" />
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="contactInfo">Contact Info</label>
        <input id="contactInfo" formControlName="contactInfo" class="form-control" placeholder="Enter contact information" />
      </div>

      <div class="form-group">
        <label for="numberOfExperience">Years of Experience</label>
        <input id="numberOfExperience" type="number" formControlName="numberOfExperience" class="form-control" placeholder="Enter years of experience" min="0" />
        @if (driverForm.get('numberOfExperience')?.invalid && driverForm.get('numberOfExperience')?.touched) {
          <div class="error-message">
            @if (driverForm.get('numberOfExperience')?.errors?.['min']) {
              Experience must be at least 0
            } @else if (driverForm.get('numberOfExperience')?.errors?.['pattern']) {
              Experience must be a positive integer
            }
          </div>
        }
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="vehicle">Assign Vehicle</label>
        <select id="vehicle" formControlName="vehicle_id" class="form-control">
          <option value="">None</option>
          @for (vehicle of vehicles; track vehicle.id) {
            <option [value]="vehicle.id">{{ vehicle.name }} - {{ vehicle.registrationNumber }}</option>
          }
        </select>
      </div>

      <div class="form-group">
        <!-- Empty for spacing -->
      </div>
    </div>

    <div class="form-actions">
      <button type="button" (click)="onCancel()" class="cancel-btn">Cancel</button>
      <button type="submit" [disabled]="loading || driverForm.invalid" class="submit-btn">
        @if (loading) {
          <span class="loading-icon">‚è≥</span>
          Saving...
        } @else {
          <span class="btn-icon">{{ driverId ? 'üíæ' : 'üë§' }}</span>
          {{ driverId ? 'Update' : 'Add' }} Driver
        }
      </button>
    </div>
  </form>
</div>
