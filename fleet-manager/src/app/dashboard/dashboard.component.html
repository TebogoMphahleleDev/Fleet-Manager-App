<div class="dashboard">
  <!-- Header Card -->
  <mat-card class="dashboard-header-card">
    <div class="dashboard-header-content">
      <h1 class="dashboard-title">Fleet Manager Dashboard</h1>
      <p class="dashboard-subtitle">Manage your fleet operations</p>
    </div>
  </mat-card>

  <!-- Statistics Cards -->
  @if (!loading && stats) {
  <div class="stats-grid">
    <mat-card class="stat-card">
      <mat-card-content>
        <mat-icon class="stat-icon" fontSet="material-icons-outlined">directions_car</mat-icon>
        <div class="stat-content">
          <h3>{{ stats.total_vehicles }}</h3>
          <p>Total Vehicles</p>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <mat-icon class="stat-icon" fontSet="material-icons-outlined">person</mat-icon>
        <div class="stat-content">
          <h3>{{ stats.total_drivers }}</h3>
          <p>Total Drivers</p>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <mat-icon class="stat-icon" fontSet="material-icons-outlined">location_on</mat-icon>
        <div class="stat-content">
          <h3>{{ stats.total_trips }}</h3>
          <p>Total Trips</p>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <mat-icon class="stat-icon" fontSet="material-icons-outlined">calendar_month</mat-icon>
        <div class="stat-content">
          <h3>{{ stats.trips_this_month }}</h3>
          <p>Trips This Month</p>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <mat-icon class="stat-icon" fontSet="material-icons-outlined">attach_money</mat-icon>
        <div class="stat-content">
          <h3>R{{ stats.maintenance_costs.toFixed(2) }}</h3>
          <p>Maintenance & Fuel Costs (12 Months)</p>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Charts Section -->
  @if (monthlyTrips.length > 0 || maintenanceCosts.length > 0) {
  <div class="charts-grid">
    <mat-card class="chart-card">
      <mat-card-content>
        <canvas baseChart
                [data]="tripsChartData"
                [options]="tripsChartOptions"
                type="line">
        </canvas>
      </mat-card-content>
    </mat-card>

    <mat-card class="chart-card">
      <mat-card-content>
        <canvas baseChart
                [data]="maintenanceChartData"
                [options]="maintenanceChartOptions"
                type="line">
        </canvas>
      </mat-card-content>
    </mat-card>
  </div>
  }
  }

  <!-- Loading State -->
  @if (loading) {
  <mat-card class="loading-card">
    <mat-card-content class="loading-content">
      <mat-spinner diameter="24"></mat-spinner>
      <span>Loading dashboard statistics...</span>
    </mat-card-content>
  </mat-card>
  }

  <!-- Management Links -->
  <div class="links-grid">
    <mat-card class="dashboard-card" routerLink="/vehicles">
      <mat-card-content>
        <mat-icon class="card-icon" fontSet="material-icons-outlined">directions_car</mat-icon>
        <h3>Manage Vehicles</h3>
        <p>View and manage your vehicle fleet</p>
      </mat-card-content>
    </mat-card>

    <mat-card class="dashboard-card" routerLink="/drivers">
      <mat-card-content>
        <mat-icon class="card-icon">person</mat-icon>
        <h3>Manage Drivers</h3>
        <p>Handle driver information and assignments</p>
      </mat-card-content>
    </mat-card>

    <mat-card class="dashboard-card" routerLink="/trips">
      <mat-card-content>
        <mat-icon class="card-icon">location_on</mat-icon>
        <h3>Manage Trips</h3>
        <p>Schedule and track vehicle trips</p>
      </mat-card-content>
    </mat-card>

    <mat-card class="dashboard-card" routerLink="/maintenance">
      <mat-card-content>
        <mat-icon class="card-icon">build</mat-icon>
        <h3>Manage Maintenance</h3>
        <p>Track maintenance and repairs</p>
      </mat-card-content>
    </mat-card>

    <mat-card class="dashboard-card" routerLink="/fuel-expenses">
      <mat-card-content>
        <mat-icon class="card-icon">local_gas_station</mat-icon>
        <h3>Fuel Expenses</h3>
        <p>Track fuel and other vehicle expenses</p>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Logout Button -->
  <div class="logout-actions">
    <button mat-raised-button (click)="logout()" class="logout-btn" color="warn">
      <mat-icon class="logout-icon">logout</mat-icon>
      Logout
    </button>
  </div>
</div>