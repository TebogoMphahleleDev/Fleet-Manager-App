<mat-card class="maintenance-form">
  <mat-card-header class="form-header">
    <mat-card-title>{{ maintenanceId ? 'Edit Maintenance' : 'Add Maintenance' }}</mat-card-title>
    <mat-card-actions>
      <button mat-stroked-button (click)="onCancel()" class="back-btn">
        <mat-icon>arrow_back</mat-icon>
        Back to List
      </button>
    </mat-card-actions>
  </mat-card-header>

  <mat-card-content>
    <form [formGroup]="maintenanceForm" (ngSubmit)="onSubmit()" class="maintenance-form-content">
      <div class="form-row">
        <mat-form-field class="form-group" appearance="outline">
          <mat-label>Vehicle *</mat-label>
          <mat-select id="vehicle_id" formControlName="vehicle_id">
            <mat-option value="">Select Vehicle</mat-option>
            <mat-option *ngFor="let vehicle of vehicles" [value]="vehicle.id">
              {{ vehicle.name }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="maintenanceForm.get('vehicle_id')?.invalid && maintenanceForm.get('vehicle_id')?.touched">
            Vehicle is required.
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field class="form-group" appearance="outline">
          <mat-label>Description *</mat-label>
          <textarea matInput id="description" formControlName="description" rows="4" placeholder="Enter maintenance description"></textarea>
          <mat-error *ngIf="maintenanceForm.get('description')?.invalid && maintenanceForm.get('description')?.touched">
            Description is required.
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field class="form-group" appearance="outline">
          <mat-label>Maintenance Date *</mat-label>
          <input matInput [matDatepicker]="datePicker" formControlName="date" />
          <mat-datepicker-toggle matSuffix [for]="datePicker"></mat-datepicker-toggle>
          <mat-datepicker #datePicker></mat-datepicker>
          <mat-error *ngIf="maintenanceForm.get('date')?.invalid && maintenanceForm.get('date')?.touched">
            Date is required.
          </mat-error>
        </mat-form-field>

        <mat-form-field class="form-group" appearance="outline">
          <mat-label>Cost *</mat-label>
          <input matInput id="cost" type="number" formControlName="cost" placeholder="Enter cost" min="0" step="0.01" />
          <mat-error *ngIf="maintenanceForm.get('cost')?.invalid && maintenanceForm.get('cost')?.touched">
            <span *ngIf="maintenanceForm.get('cost')?.errors?.['required']">Cost is required</span>
            <span *ngIf="maintenanceForm.get('cost')?.errors?.['min']">Cost must be positive</span>
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field class="form-group" appearance="outline">
          <mat-label>Maintenance Type</mat-label>
          <mat-select formControlName="type">
            <mat-option value="">Select Type</mat-option>
            <mat-option value="preventive">Preventive</mat-option>
            <mat-option value="corrective">Corrective</mat-option>
            <mat-option value="emergency">Emergency</mat-option>
          </mat-select>
        </mat-form-field>

        <div class="form-group toggle-group">
          <mat-label>Completed</mat-label>
          <mat-slide-toggle formControlName="is_completed">Completed</mat-slide-toggle>
        </div>
      </div>

      <div class="form-actions">
        <button mat-stroked-button type="button" (click)="onCancel()" class="cancel-btn">Cancel</button>
        <button mat-raised-button type="submit" [disabled]="maintenanceForm.invalid" class="submit-btn" color="primary">
          <mat-icon>{{ maintenanceId ? 'save' : 'add' }}</mat-icon>
          {{ maintenanceId ? 'Update' : 'Add' }} Maintenance
        </button>
      </div>
    </form>
  </mat-card-content>
</mat-card>
