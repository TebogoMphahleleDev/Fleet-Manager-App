import{a as pe,b as de,c as se,d as ue,f as fe}from"./chunk-3XDGEVN2.js";import"./chunk-67IAFLRI.js";import{b as N,d as h,f as w,g as D,i as O,j as P,k as T,l as R,m as A,n as j,o as q,p as B,t as Z,u as $}from"./chunk-SAZJTF6N.js";import{a as J,b as K,d as Q,g as W,h as X}from"./chunk-IUCOVMK4.js";import{a as ne,b as ae}from"./chunk-FFLQZGHZ.js";import{a as oe}from"./chunk-3YM7IDPM.js";import{a as ce}from"./chunk-WNOI4ZBI.js";import{a as le,b as me}from"./chunk-7SN2W6C3.js";import"./chunk-TMZC4RWW.js";import"./chunk-JKTBMZC7.js";import"./chunk-5KAHAUYY.js";import{A as G,B as Y,C as L,E as z,F as H,G as U,R as ee,S as te,X as ie,Y as re}from"./chunk-7UVTZ53J.js";import{$a as b,Aa as S,Fa as u,Qa as c,Ra as i,Sa as t,Sb as V,Ta as d,Vb as E,Y as v,Ya as F,Z as g,_a as _,cc as y,ec as k,jb as I,nb as o,ob as C,pb as x,sa as n,wa as s}from"./chunk-7SSOWWR7.js";function ve(r,m){r&1&&(i(0,"mat-error"),o(1," Vehicle name is required "),t())}function ge(r,m){r&1&&(i(0,"mat-error"),o(1," Registration number is required "),t())}function _e(r,m){r&1&&(i(0,"span"),o(1,"Year is required"),t())}function be(r,m){r&1&&(i(0,"span"),o(1,"Year must be at least 1900"),t())}function Ce(r,m){r&1&&(i(0,"span"),o(1,"Year must be at most 2025"),t())}function Me(r,m){if(r&1&&(i(0,"mat-error"),u(1,_e,2,0,"span",8)(2,be,2,0,"span",8)(3,Ce,2,0,"span",8),t()),r&2){let a,e,l,p=b();n(),c("ngIf",(a=p.vehicleForm.get("yearOfCar"))==null||a.errors==null?null:a.errors.required),n(),c("ngIf",(e=p.vehicleForm.get("yearOfCar"))==null||e.errors==null?null:e.errors.min),n(),c("ngIf",(l=p.vehicleForm.get("yearOfCar"))==null||l.errors==null?null:l.errors.max)}}function Se(r,m){if(r&1&&(i(0,"mat-icon"),o(1),t()),r&2){let a=b();n(),C(a.vehicleId?"save":"directions_car")}}function Fe(r,m){r&1&&d(0,"mat-spinner",21)}var he=class r{constructor(m,a,e,l,p,f){this.fb=m;this.vehicleService=a;this.route=e;this.router=l;this.popupService=p;this.dialog=f;this.vehicleForm=this.fb.group({name:["",h.required],model:[""],make:[""],color:[""],registrationNumber:[""],licenseExpiryDate:[""],yearOfCar:[null,[h.required,h.min(1900),h.max(2024)]]})}vehicleForm;vehicleId=null;loading=!1;ngOnInit(){this.vehicleId=this.route.snapshot.params.id||null,this.vehicleId?this.loadVehicle(this.vehicleId):this.vehicleForm.reset()}loadVehicle(m){this.vehicleService.getVehicles().subscribe({next:a=>{let e=a.find(l=>l.id===m);e?this.vehicleForm.patchValue(e):this.popupService.showError("Vehicle not found")},error:()=>this.popupService.showError("Failed to load vehicle")})}onSubmit(){if(this.vehicleForm.invalid)return;this.dialog.open(me,{data:{message:this.vehicleId?"Are you sure you want to update this vehicle?":"Are you sure you want to add this vehicle?"}}).afterClosed().subscribe(a=>{if(a){this.loading=!0;let e=this.vehicleForm.value;this.vehicleId?this.vehicleService.updateVehicle(this.vehicleId,e).subscribe({next:()=>{this.popupService.showSuccess("Vehicle updated successfully"),this.router.navigate(["/vehicles"])},error:()=>{this.popupService.showError("Failed to update vehicle"),this.loading=!1}}):this.vehicleService.addVehicle(e).subscribe({next:()=>{this.popupService.showSuccess("Vehicle added successfully"),this.router.navigate(["/vehicles"])},error:()=>{this.popupService.showError("Failed to add vehicle"),this.loading=!1}})}})}onCancel(){this.router.navigate(["/vehicles"])}static \u0275fac=function(a){return new(a||r)(s(q),s(ce),s(y),s(k),s(oe),s(le))};static \u0275cmp=S({type:r,selectors:[["app-vehicle-form"]],decls:57,vars:11,consts:[["expiryPicker",""],[1,"vehicle-form"],[1,"form-header"],["mat-stroked-button","",1,"back-btn",3,"click"],[1,"vehicle-form-content",3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline",1,"form-group"],["matInput","","id","name","formControlName","name","placeholder","Enter vehicle name"],[4,"ngIf"],["matInput","","id","model","formControlName","model","placeholder","Enter model"],["matInput","","id","make","formControlName","make","placeholder","Enter make"],["matInput","","id","color","formControlName","color","placeholder","Enter color"],["matInput","","id","registrationNumber","formControlName","registrationNumber","placeholder","Enter registration number"],["matInput","","id","yearOfCar","type","number","formControlName","yearOfCar","placeholder","Enter year","min","1900","max","2025"],["matInput","","formControlName","licenseExpiryDate",3,"matDatepicker"],["matSuffix","",3,"for"],[1,"form-group"],[1,"form-actions"],["mat-stroked-button","","type","button",1,"cancel-btn",3,"click"],["mat-raised-button","","type","submit","color","primary",1,"submit-btn",3,"disabled"],["diameter","20",4,"ngIf"],["diameter","20"]],template:function(a,e){if(a&1){let l=F();i(0,"mat-card",1)(1,"mat-card-header",2)(2,"mat-card-title"),o(3),t(),i(4,"mat-card-actions")(5,"button",3),_("click",function(){return v(l),g(e.onCancel())}),i(6,"mat-icon"),o(7,"arrow_back"),t(),o(8," Back to List "),t()()(),i(9,"mat-card-content")(10,"form",4),_("ngSubmit",function(){return v(l),g(e.onSubmit())}),i(11,"div",5)(12,"mat-form-field",6)(13,"mat-label"),o(14,"Vehicle Name *"),t(),d(15,"input",7),u(16,ve,2,0,"mat-error",8),t(),i(17,"mat-form-field",6)(18,"mat-label"),o(19,"Model"),t(),d(20,"input",9),t()(),i(21,"div",5)(22,"mat-form-field",6)(23,"mat-label"),o(24,"Make"),t(),d(25,"input",10),t(),i(26,"mat-form-field",6)(27,"mat-label"),o(28,"Color"),t(),d(29,"input",11),t()(),i(30,"div",5)(31,"mat-form-field",6)(32,"mat-label"),o(33,"Registration Number *"),t(),d(34,"input",12),u(35,ge,2,0,"mat-error",8),t(),i(36,"mat-form-field",6)(37,"mat-label"),o(38,"Year of Car *"),t(),d(39,"input",13),u(40,Me,4,3,"mat-error",8),t()(),i(41,"div",5)(42,"mat-form-field",6)(43,"mat-label"),o(44,"License Expiry Date"),t(),d(45,"input",14)(46,"mat-datepicker-toggle",15)(47,"mat-datepicker",null,0),t(),d(49,"div",16),t(),i(50,"div",17)(51,"button",18),_("click",function(){return v(l),g(e.onCancel())}),o(52,"Cancel"),t(),i(53,"button",19),u(54,Se,2,1,"mat-icon",8)(55,Fe,1,0,"mat-spinner",20),o(56),t()()()()()}if(a&2){let l,p,f,M=I(48);n(3),C(e.vehicleId?"Edit Vehicle":"Add New Vehicle"),n(7),c("formGroup",e.vehicleForm),n(6),c("ngIf",((l=e.vehicleForm.get("name"))==null?null:l.invalid)&&((l=e.vehicleForm.get("name"))==null?null:l.touched)),n(19),c("ngIf",((p=e.vehicleForm.get("registrationNumber"))==null?null:p.invalid)&&((p=e.vehicleForm.get("registrationNumber"))==null?null:p.touched)),n(5),c("ngIf",((f=e.vehicleForm.get("yearOfCar"))==null?null:f.invalid)&&((f=e.vehicleForm.get("yearOfCar"))==null?null:f.touched)),n(5),c("matDatepicker",M),n(),c("for",M),n(7),c("disabled",e.loading||e.vehicleForm.invalid),n(),c("ngIf",!e.loading),n(),c("ngIf",e.loading),n(),x(" ",e.loading?"Saving...":(e.vehicleId?"Update":"Add")+" Vehicle"," ")}},dependencies:[E,V,B,O,N,P,w,D,j,A,T,R,U,G,z,L,H,Y,X,W,J,K,Q,$,Z,re,ie,te,ee,ae,ne,ue,pe,de,se,fe],styles:[".vehicle-form[_ngcontent-%COMP%]{max-width:400px;margin:20px auto}.error[_ngcontent-%COMP%]{color:red}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}input[_ngcontent-%COMP%]{width:100%;padding:8px;box-sizing:border-box;margin-bottom:10px}button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer}button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}"]})};export{he as VehicleFormComponent};
